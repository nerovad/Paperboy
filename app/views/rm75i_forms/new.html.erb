<div class="form-header">
  <h1>RM-75i: Accident / Near-Miss Investigation Report</h1>
</div>

<div class="form-wrapper">
  <%= form_with model: @rm75i_form, local: true do |form| %>

      <!-- Hidden field for event_id -->
  <%= form.hidden_field :event_id, value: params[:event_id] %>

    <!-- Page 1: Employee Info -->
    <div class="form-page">
      <h2>Employee Info</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill"><%= form.label :employee_id %><%= form.text_field :employee_id, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :report_type %><%= form.text_field :report_type, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :employee_name %><%= form.text_field :employee_name, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :department %><%= form.text_field :department, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :job_title %><%= form.text_field :job_title, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :division %><%= form.text_field :division, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :work_hours %><%= form.text_field :work_hours, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :hours_per_week %><%= form.text_field :hours_per_week, class: "form-control" %></div>
      </div>
    </div>

    <!-- Page 2: Incident Details -->
    <div class="form-page" style="display:none;">
      <h2>Incident Details</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill"><%= form.label :supervisor_name %><%= form.text_field :supervisor_name, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :supervisor_title %><%= form.text_field :supervisor_title, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :supervisor_phone %><%= form.text_field :supervisor_phone, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :supervisor_email %><%= form.text_field :supervisor_email, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :form_completed_by %><%= form.text_field :form_completed_by, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :date_of_injury %><%= form.date_field :date_of_injury, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :time_occurred, "Time Occurred" %><%= form.text_field :time_occurred, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :incident_location %><%= form.text_field :incident_location, class: "form-control" %></div>
      </div>
    </div>

    <!-- Page 3: Medical and Exposure Info -->
    <div class="form-page" style="display:none;">
      <h2>Medical & Exposure</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill"><%= form.label :injury_description %><%= form.text_area :injury_description, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :how_it_happened %><%= form.text_area :how_it_happened, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :physician_name %><%= form.text_field :physician_name, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :physician_address %><%= form.text_field :physician_address, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :physician_phone %><%= form.text_field :physician_phone, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :hospital_name %><%= form.text_field :hospital_name, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :hospital_address %><%= form.text_field :hospital_address, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :hospital_phone %><%= form.text_field :hospital_phone, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :hospitalized_overnight %><%= form.select :hospitalized_overnight, options_for_select(["Yes", "No"]), {}, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :source_blood_tested %><%= form.select :source_blood_tested, options_for_select(["Yes", "No"]), {}, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :mr_number_source %><%= form.text_field :mr_number_source, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :mr_number_employee %><%= form.text_field :mr_number_employee, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :bloodborne_or_covid %><%= form.select :bloodborne_or_covid, options_for_select(["Yes", "No"]), {}, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :covid_status, "COVID-19 Status" %><%= form.select :covid_status, options_for_select(["Unconfirmed", "Confirmed"]), {}, class: "form-control" %></div>
      </div>
    </div>

    <!-- Page 4: Investigation -->
    <div class="form-page" style="display:none;">
      <h2>Investigation</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill"><%= form.label :date_investigation_began %><%= form.date_field :date_investigation_began, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :date_investigation_complete %><%= form.date_field :date_investigation_complete, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :investigator_name %><%= form.text_field :investigator_name, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :investigator_title %><%= form.text_field :investigator_title, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :investigator_phone %><%= form.text_field :investigator_phone, class: "form-control" %></div>
      </div>
    </div>

    <!-- Page 5: Nature & Corrective Actions -->
    <div class="form-page" style="display:none;">
      <h2>Nature & Corrective Actions</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill"><%= form.label :nature_of_incident %><%= form.text_area :nature_of_incident, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :cause_of_incident %><%= form.text_area :cause_of_incident, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :root_cause %><%= form.text_area :root_cause, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :future_severity %><%= form.text_field :future_severity, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :recurrence_probability %><%= form.text_field :recurrence_probability, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :unsafe_corrected_immediately %><%= form.select :unsafe_corrected_immediately, options_for_select(["Yes", "No"]), {}, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :checklist_or_training_updated %><%= form.select :checklist_or_training_updated, options_for_select(["Yes", "No"]), {}, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :actual_correction_date %><%= form.date_field :actual_correction_date, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :targeted_correction_date %><%= form.date_field :targeted_correction_date, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :correction_responsible %><%= form.text_field :correction_responsible, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :correction_title %><%= form.text_field :correction_title, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :correction_dept %><%= form.text_field :correction_dept, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :correction_phone %><%= form.text_field :correction_phone, class: "form-control" %></div>
      </div>
    </div>

    <!-- Page 6: Confidential Info -->
    <div class="form-page" style="display:none;">
      <h2>Confidential Info</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill"><%= form.label :job_classification %><%= form.text_field :job_classification, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :compensation %><%= form.text_field :compensation, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :home_phone %><%= form.text_field :home_phone, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :date_of_hire %><%= form.date_field :date_of_hire, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :dob %><%= form.date_field :dob, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :email %><%= form.email_field :email, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :work_phone %><%= form.text_field :work_phone, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :cell_phone %><%= form.text_field :cell_phone, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :home_address %><%= form.text_field :home_address, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :city %><%= form.text_field :city, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :state %><%= form.text_field :state, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :zip %><%= form.text_field :zip, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :ssn %><%= form.text_field :ssn, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :ethnicity %><%= form.text_field :ethnicity, class: "form-control" %></div>
        <div class="form-group flex-fill"><%= form.label :unit_number %><%= form.text_field :unit_number, class: "form-control" %></div>
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="navigation-buttons d-flex justify-content-between">
      <button type="button" id="prevBtn" style="display: none;">Previous</button>
      <div>
        <button type="button" id="nextBtn">Next</button>
        <%= form.submit "Submit", style: "display: none;" %>
      </div>
    </div>

    <!-- Progress Dots -->
    <div class="progress-wrapper">
      <div class="progress-bar-container"><div class="progress-bar" id="progressBar"></div></div>
      <div class="progress-dots"><% 6.times do |i| %><div class="dot <%= 'active' if i == 0 %>"></div><% end %></div>
    </div>

  <% end %>
</div>
