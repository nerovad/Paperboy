<%# app/views/reports/index.html.erb %>
<div class="form-header">
  <h1>Generate Reports</h1>
  <p>Create comprehensive PDF reports for any form within a specified date range</p>
</div>

<div class="form-wrapper reports-wrapper">
  <%= form_with url: reports_generate_path, method: :post, local: true do |f| %>
    
    <%# Form Selection %>
    <div class="form-group">
      <%= f.label :form_type, "Select Form", class: "form-label" %>
      <%= f.select :form_type, 
        options_for_select(@forms.map { |form| [form[:name], form[:value]] }, params[:form_type]),
        { prompt: "Choose a form..." },
        { class: "form-control", required: true }
      %>
      <small class="help-text">Select the form type you want to generate reports for</small>
    </div>

    <%# Date Range %>
    <div class="form-row">
      <div class="form-group flex-fill">
        <%= f.label :start_date, "Start Date", class: "form-label" %>
        <%= f.date_field :start_date, 
          class: "form-control", 
          required: true,
          value: params[:start_date] || 1.month.ago.to_date
        %>
        <small class="help-text">Beginning of date range</small>
      </div>

      <div class="form-group flex-fill">
        <%= f.label :end_date, "End Date", class: "form-label" %>
        <%= f.date_field :end_date, 
          class: "form-control", 
          required: true,
          value: params[:end_date] || Date.today
        %>
        <small class="help-text">End of date range</small>
      </div>
    </div>

    <%# Format Selection %>
    <div class="form-group">
      <%= f.label :format, "Export Format", class: "form-label" %>
      <%= f.select :format,
        [["PDF", "pdf"]],
        {},
        { class: "form-control", required: true }
      %>
      <small class="help-text">Select the export format (more formats coming soon)</small>
    </div>

    <%# Information Box %>
    <div class="info-box">
      <strong>How it works:</strong>
      <ul>
        <li>Select a form and date range above</li>
        <li>The system will generate a PDF for each submission within that date range</li>
        <li>All PDFs will be packaged into a single ZIP file</li>
        <li>You'll receive an email when your report is ready for download</li>
        <li>Large reports may take several minutes to generate</li>
      </ul>
    </div>

    <%# Submit Button %>
    <%= f.submit "Generate Report", 
      class: "btn approve",
      data: { 
        disable_with: "Generating...",
        confirm: "This will generate PDFs for all matching submissions. Continue?"
      }
    %>

  <% end %>

  <%# Recent Reports Section %>
  <div class="section-divider"></div>
  
  <div class="section-header">
    <h2>Recent Reports</h2>
  </div>
  
  <div class="empty-state">
    <p>Your recently generated reports will appear here</p>
    <p class="empty-state-hint">Coming soon</p>
  </div>
</div>
