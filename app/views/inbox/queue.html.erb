<!-- app/views/inbox/queue.html.erb -->
<turbo-frame id="main-content">
  <h1 class="page-title">Inbox Queue</h1>

  <div class="table-wrapper">
    <table class="submission-table">
      <thead>
        <tr>
          <th>Form Type</th>
          <th>Name</th>
          <th>Unit</th>
          <th>Email</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% if @submissions.present? %>
          <% @submissions.each do |submission| %>
            <tr>
              <td><%= submission.class.name.demodulize.titleize %></td>
              <td><%= submission.name %></td>
              <td><%= submission.try(:unit) || "â€”" %></td>
              <td><%= submission.email %></td>
              <td class="action-buttons">
                <% if submission.is_a?(ParkingLotSubmission) %>
                  <%= link_to "View PDF", pdf_parking_lot_submission_path(submission), target: "_blank", class: "pdf-button" %>
                  <%= button_to "Approve", approve_parking_lot_submission_path(submission), method: :patch, class: "btn approve" %>
                  <%= button_to "Deny", deny_parking_lot_submission_path(submission), method: :patch, class: "btn deny" %>
                <% elsif submission.is_a?(ProbationTransferRequest) %>
                  <%= link_to "View PDF", pdf_probation_transfer_request_path(submission), target: "_blank", class: "pdf-button" %>
                  <%= button_to "Approve", approve_probation_transfer_request_path(submission), method: :patch, class: "btn approve" %>
                  <%= button_to "Deny", deny_probation_transfer_request_path(submission), method: :patch, class: "btn deny" %>
                <% end %>
              </td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="5">No submissions found.</td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</turbo-frame>
