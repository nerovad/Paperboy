<div class="form-header">
  <h1>Leave of Absence Request Form</h1>
</div>

<div class="form-wrapper">
  <%= form_with model: @loa_form, local: true do |form| %>

    <!-- Page 1: Employee Info -->
    <div class="form-page">
      <h2>Employee Info</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill">
          <%= form.label :employee_id, "Employee ID" %>
          <%= form.text_field :employee_id, value: @prefill_data[:employee_id], class: "form-control", readonly: true %>
        </div>
        <div class="form-group flex-fill">
          <%= form.label :first_name, "First Name" %>
          <%= form.text_field :first_name, value: @prefill_data[:first_name], class: "form-control", required: true %>
        </div>
        <div class="form-group flex-fill">
          <%= form.label :middle_name, "Middle Name" %>
          <%= form.text_field :middle_name, class: "form-control" %>
        </div>
        <div class="form-group flex-fill">
          <%= form.label :last_name, "Last Name" %>
          <%= form.text_field :last_name, value: @prefill_data[:last_name], class: "form-control", required: true %>
        </div>
      </div>

      <div class="form-row d-flex flex-wrap">
        <div class="form-group flex-fill">
          <%= form.label :street_address, "Street Address" %>
          <%= form.text_field :street_address, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :city, "City" %>
          <%= form.text_field :city, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :state, "State" %>
          <%= form.text_field :state, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :zip_code, "Zip Code" %>
          <%= form.text_field :zip_code, class: "form-control" %>
        </div>
      </div>

      <div class="form-row d-flex flex-wrap">
        <div class="form-group">
          <%= form.label :home_phone, "Home Phone" %>
          <%= form.text_field :home_phone, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :cell_phone, "Cell Phone" %>
          <%= form.text_field :cell_phone, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :work_phone, "Work Phone" %>
          <%= form.text_field :work_phone, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :work_email, "Work Email" %>
          <%= form.email_field :work_email, value: @prefill_data[:email], class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :personal_email, "Personal Email" %>
          <%= form.email_field :personal_email, class: "form-control" %>
        </div>
      </div>
    </div>

    <!-- Page 2: Agency Info -->
    <div class="form-page" style="display:none;">
      <h2>Agency Info</h2>
      <div data-controller="gsabss-selects" class="form-row d-flex flex-wrap">
        <div class="form-group">
          <%= form.label :agency, "Agency" %>
          <%= form.select :agency,
                options_for_select(@agency_options, @prefill_data[:agency]),
                {}, class: "form-control", id: "agency-select",
                data: {
                  gsabss_selects_target: "agency",
                  action: "change->gsabss-selects#loadDivisions"
                } %>
        </div>
        <div class="form-group">
          <%= form.label :division, "Division" %>
          <%= form.select :division,
                options_for_select(@division_options, @prefill_data[:division]),
                {}, class: "form-control", id: "division-select",
                data: {
                  gsabss_selects_target: "division",
                  action: "change->gsabss-selects#loadDepartments"
                } %>
        </div>
        <div class="form-group">
          <%= form.label :department, "Department" %>
          <%= form.select :department,
                options_for_select(@department_options, @prefill_data[:department]),
                {}, class: "form-control", id: "department-select",
                data: {
                  gsabss_selects_target: "department",
                  action: "change->gsabss-selects#loadUnits"
                } %>
        </div>
        <div class="form-group">
          <%= form.label :unit, "Unit" %>
          <%= form.select :unit,
                options_for_select(@unit_options, @prefill_data[:unit]),
                {}, class: "form-control", id: "unit-select",
                data: { gsabss_selects_target: "unit" } %>
        </div>
      </div>
    </div>

    <!-- Page 3: Leave Details -->
    <div class="form-page" style="display:none;">
      <h2>Leave Details</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group">
          <%= form.label :last_date_worked, "Last Date Worked" %>
          <%= form.date_field :last_date_worked, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :start_date, "Leave Start Date" %>
          <%= form.date_field :start_date, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :end_date, "Leave End Date" %>
          <%= form.date_field :end_date, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :extension, "Is this an extension?" %>
          <%= form.check_box :extension %>
        </div>
      </div>

      <div class="form-group">
        <%= form.label :reason, "Reason for Leave" %>
        <%= form.text_area :reason, class: "form-control", rows: 3 %>
      </div>

      <div class="form-group">
        <%= form.label :pay_status, "Pay Status During Leave" %>
        <%= form.text_field :pay_status, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= form.label :leave_type, "Type of Leave (e.g. FMLA, Personal, Disability)" %>
        <%= form.text_field :leave_type, class: "form-control" %>
      </div>
    </div>

    <!-- Page 4: Supervisor Info -->
    <div class="form-page" style="display:none;">
      <h2>Supervisor Info</h2>
      <div class="form-row d-flex flex-wrap">
        <div class="form-group">
          <%= form.label :supervisor_name, "Supervisor Name" %>
          <%= form.text_field :supervisor_name, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :supervisor_phone, "Supervisor Phone" %>
          <%= form.text_field :supervisor_phone, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= form.label :supervisor_email, "Supervisor Email" %>
          <%= form.email_field :supervisor_email, class: "form-control" %>
        </div>
      </div>
    </div>

    <!-- Page 5: Declarations -->
    <div class="form-page" style="display:none;">
      <h2>Employee Declarations</h2>

      <div class="form-group">
        <%= form.label :disability_benefits, "Are you applying for disability benefits?" %>
        <%= form.check_box :disability_benefits %>
      </div>

      <div class="form-group">
        <%= form.label :waive_benefits, "Do you waive benefits from any sources?" %>
        <%= form.text_area :waive_benefits, class: "form-control", rows: 3 %>
      </div>

      <div class="form-group">
        <%= form.label :notes, "Additional Notes or Comments" %>
        <%= form.text_area :notes, class: "form-control", rows: 4 %>
      </div>

      <div class="form-group">
        <%= form.label :agreement_initials, "Initial Here to Confirm Acknowledgment" %>
        <%= form.text_field :agreement_initials, class: "form-control", required: true %>
      </div>

      <div class="form-group">
        <%= form.label :confirmed_via_email, "Did the employee confirm this request via email?" %>
        <%= form.check_box :confirmed_via_email %>
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="navigation-buttons d-flex justify-content-between">
      <div>
        <button type="button" id="prevBtn" style="display: none;">Previous</button>
      </div>
      <div>
        <button type="button" id="nextBtn">Next</button>
        <%= form.submit "Submit", style: "display: none;" %>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="progress-wrapper">
      <div class="progress-bar-container">
        <div class="progress-bar" id="progressBar"></div>
      </div>
      <div class="progress-dots">
        <% 5.times do |index| %>
          <div class="dot <%= 'active' if index == 0 %>"></div>
        <% end %>
      </div>
    </div>

  <% end %>
</div>
